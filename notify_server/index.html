<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>SSE handler</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>

    <body>
        <!--[if lt IE 7]>
          <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <h1>Server Sent Events</h1>

        <script lang="javascript">
          let token = "eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MzY1ODgyODQsImV4cCI6MTczNzE5MzA4NCwibmJmIjoxNzM2NTg4Mjg0LCJpc3MiOiJjaGF0X3NlcnZlciIsImF1ZCI6ImNoYXRfd2ViIiwiaWQiOjEsIndzX2lkIjoxLCJmdWxsbmFtZSI6Imh5eCIsImVtYWlsIjoiaHl4QGxnLmNvbSIsImNyZWF0ZWRfYXQiOiIyMDI1LTAxLTExVDA4OjMyOjEyLjQ0Nzg4MFoifQ.SEaUhh8kCkucTllskENIKLgRxWVAH1GT3a7a5fGG2bAP8YwF0Ue6m5Hkx9CY5_fdSQHYetL12_t9sx3sq_CTCQ"
          let source = new EventSource(`/events?access_token=${token}`);
          source.onmessage = function(event) {
            console.log("Got:", event.data);
          };

          source.addEventListener("NewChat", function(event) {
            console.log("NewChat:", event.data);
          });

          source.addEventListener("AddToChat", function(event) {
            console.log("AddToChat:", event.data);
          });

          source.addEventListener("RemoveFromChat", function(event) {
            console.log("RemoveFromChat:", event.data);
          });

          source.addEventListener("NewMessage", function(event) {
            console.log("NewMessage:", event.data);
          });
        </script>
      </body>
</html>
